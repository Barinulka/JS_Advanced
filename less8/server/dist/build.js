(()=>{var t={66:t=>{const e="http://localhost:3000",o=new Vue({el:"#app",data:{goods:[],filteredGoods:[],cartItems:[],count:1},methods:{async getProducts(){const t=await fetch(`${e}/catalogData`);if(t.ok){const e=await t.json();this.goods=e,this.filteredGoods=e}else alert("Ошибка при соединении с сервером")},async getCartItems(){const t=await fetch(`${e}/cartData`);if(t.ok){const e=await t.json();this.cartItems=e}else alert("Ошибка при соединении с сервером")},filterGoods(t){console.log(t);const e=new RegExp(t,"i"),o=this.goods.filter((t=>e.test(t.product_name)));o.length>0?this.filteredGoods=o:alert(`Товар "${t}" не найден`)}},async mounted(){await this.getProducts(),await this.getCartItems()},computed:{}});t.exports={app:o}}},e={};function o(s){var i=e[s];if(void 0!==i)return i.exports;var a=e[s]={exports:{}};return t[s](a,a.exports,o),a.exports}(()=>{"use strict";Vue.component("cart-list",{props:["cart"],data:()=>({isVisibleCart:!1,componentKey:0}),methods:{showCart:function(){0==this.isVisibleCart?this.isVisibleCart=!0:this.isVisibleCart=!1,this.$emit("get")},async deleteItem(t){await fetch(`${API}/deleteItem`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)}),this.$emit("get")}},template:'\n        <div class="cart">\n        <button class="cart-button" type="button" v-on:click="showCart">Корзина</button>\n            <div class="cart-section__items center" v-if="isVisibleCart" >\n                <div class="rotate"></div>\n                <h3 class="cart-empty" style="height: 20px;line-height: 20px;padding: 0;margin: 0;" v-if="cart.length == 0">Корзина пуста</h3>\n                <div class="cart-item" v-for="cartItem in cart" v-bind:key=cartItem.id_product>\n                    <h3 class="cart-item__title">{{cartItem.product_name}}</h3>\n                    <p class="cart-item__price">{{cartItem.price}} руб.</p>\n                    <p class="cart-item__count">{{cartItem.count}} шт.</p>\n                    <div class="cart-item__delete" \n                        v-bind:item-id="cartItem.id_product"\n                        v-on:click="deleteItem(cartItem)"\n                    >x</div>\n                </div>\n            </div>\n        </div>\n    '}),Vue.component("goods-item",{props:["good"],data:()=>({image:"https://via.placeholder.com/150"}),methods:{async addToCart(){await fetch(`${API}/addToCart`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(this.good)})}},template:'\n        <div class="goods-item">\n            <img class="goods-item__image" alt="Some img" v-bind:src="image">\n            <h3 class="goods-item__title">{{good.product_name}}</h3>\n            <p class="goods-item__price">{{good.price}}</p>\n            <button class="goods-item__add-cart" \n                v-bind:data-id="good.id_product"\n                v-on:click="addToCart"\n            >В корзину</button>\n        </div>  \n    '}),Vue.component("goods-list",{props:["goods"],template:'\n        <div class="goods">\n            <goods-item v-for="good in goods" v-bind:good="good" v-bind:key="good.id_product"></goods-item>\n        </div> \n    '}),Vue.component("search",{data:()=>({searchLine:""}),methods:{filtered:function(t){this.$root.filterGoods(t)}},template:'\n        <div class="logo">\n            <a href="#" class="logo-title">e-Shop</a>\n            <input type="text" class="goods-search" v-model="searchLine">\n            <button class="search-button" type="button" v-on:click="filtered(searchLine)">Искать</button>\n        </div>\n    '}),o(66)})()})();